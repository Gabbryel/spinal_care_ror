<div class="member-form" data-controller="memberFormSpecialty" id="med-prof" data-medical-professions="<%= Profession.all.select {|el| el.has_specialty}.pluck(:name)%>">
  <%= simple_form_for(member, id: (member.id ? dom_id(member, :edit) : dom_id(Member.new))) do |f|%>
    <% if member.errors.any? %>
      <div class="form-error-message">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" />
        </svg>
        <%= member.errors.full_messages.to_sentence.capitalize %>
      </div>
    <% end %>

    <div class="form-section">
      <h3 class="form-section-title">Informații generale</h3>
      
      <div class="form-group">
        <%= f.label :academic_title, 'Titlu academic', class: 'form-label' %>
        <%= f.input :academic_title, label: false, placeholder: 'Dr., Conf. Dr., etc.', wrapper_html: { class: 'form-input-wrapper' } %>
      </div>

      <div class="form-row">
        <div class="form-group">
          <%= f.label :first_name, 'Prenume *', class: 'form-label' %>
          <%= f.input :first_name, label: false, placeholder: 'Prenumele membrului', wrapper_html: { class: 'form-input-wrapper' } %>
        </div>
        <div class="form-group">
          <%= f.label :last_name, 'Nume *', class: 'form-label' %>
          <%= f.input :last_name, label: false, placeholder: 'Numele membrului', wrapper_html: { class: 'form-input-wrapper' } %>
        </div>
      </div>

      <div class="form-group">
        <%= f.label :photo, 'Fotografie', class: 'form-label' %>
        <%= f.input :photo, label: false, wrapper_html: { class: 'form-input-wrapper' } %>
        <% if member.photo.attached? %>
          <div class="photo-preview">
            <%= cl_image_tag member.photo.key, width: 150, height: 150, crop: :fill %>
          </div>
        <% end %>
      </div>

      <div class="form-group">
        <%= f.label :profession_id, 'Profesie *', class: 'form-label' %>
        <%= f.association :profession, 
            input_html: { 
              data: { 
                memberFormSpecialty_target: 'profession', 
                action: 'change->memberFormSpecialty#change'
              }
            }, 
            label: false, 
            prompt: 'Selectează profesia',
            wrapper_html: { class: 'form-input-wrapper' } %>
      </div>
    </div>

    <div class="form-section form-section-medic" id="medic-form" data-memberFormSpecialty-target="medic">
      <h3 class="form-section-title">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23-.693L5 14.5m14.8.8l1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0112 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5" />
        </svg>
        Secțiune medicală
      </h3>
      <p class="form-section-hint">Completează doar pentru profesia de medic</p>

      <div class="form-group">
        <%= f.label :doctor_grade, 'Grad profesional', class: 'form-label' %>
        <%= f.input :doctor_grade, 
            collection: ['generalist', 'rezident', 'primar', 'specialist'], 
            label: false, 
            prompt: 'Selectează gradul profesional',
            wrapper_html: { class: 'form-input-wrapper' } %>
      </div>

      <div class="form-group">
        <%= f.label :specialty_id, 'Specialitate medicală', class: 'form-label' %>
        <%= f.association :specialty, 
            label: false, 
            prompt: 'Selectează specialitatea',
            wrapper_html: { class: 'form-input-wrapper' } %>
      </div>

      <div class="form-group form-checkbox">
        <%= f.input :has_day_hospitalization, 
            as: :boolean,
            label: 'Lucrează în regim de spitalizare de zi?' %>
      </div>
    </div>
    
    <div class="form-section form-section-kineto">
      <h3 class="form-section-title">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.59 14.37a6 6 0 01-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 006.16-12.12A14.98 14.98 0 009.631 8.41m5.96 5.96a14.926 14.926 0 01-5.841 2.58m-.119-8.54a6 6 0 00-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 00-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 01-2.448-2.448 14.9 14.9 0 01.06-.312m-2.24 2.39a4.493 4.493 0 00-1.757 4.306 4.493 4.493 0 004.306-1.758M16.5 9a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z" />
        </svg>
        Secțiune kinetoterapie
      </h3>
      <p class="form-section-hint">Completează doar pentru profesia de kinetoterapie</p>

      <div class="form-group form-checkbox">
        <%= f.input :schroth, 
            as: :boolean,
            label: "Este specialist Schroth" %>
      </div>

      <div class="form-group form-checkbox">
        <%= f.input :selected, 
            as: :boolean,
            label: "Afișează pe pagina principală" %>
      </div>

      <div class="form-group">
        <%= f.label :order, 'Ordine de afișare (1-4)', class: 'form-label' %>
        <%= f.input :order, 
            as: :radio_buttons, 
            collection: 1..4, 
            label: false,
            wrapper_html: { class: 'form-radio-wrapper' } %>
      </div>
    </div>

    <div class="form-section">
      <h3 class="form-section-title">Setări pagină & vizibilitate</h3>

      <div class="form-group form-checkbox">
        <%= f.input :has_own_page, 
            as: :boolean,
            label: "Are pagină dedicată" %>
      </div>

      <div class="form-group form-checkbox">
        <%= f.input :has_prices, 
            as: :boolean,
            label: "Are listă de prețuri asociată" %>
      </div>

      <div class="form-group form-checkbox">
        <%= f.input :is_active, 
            as: :boolean,
            label: "Profil activ în site" %>
      </div>

      <div class="form-group form-checkbox">
        <%= f.input :specialty_favored, 
            as: :boolean,
            label: "Afișare prioritară pe pagina specialității" %>
      </div>
    </div>

    <div class="form-section">
      <h3 class="form-section-title">Biografie & descriere</h3>
      <%= f.rich_text_area :description, 
          placeholder: 'Scrie biografia și alte informații despre membrul echipei...' %>
    </div>

    <div class="form-actions">
      <button type="button" class="btn-cancel" data-bs-dismiss="modal">Anulează</button>
      <%= f.submit 'Salvează', class: 'btn-submit' %>
    </div>
  <% end %>
</div>